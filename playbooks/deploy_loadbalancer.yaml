---
- name: DÃ©ploiement du VNF Load Balancer
  hosts: localhost
  vars:
    project_dir: /home/ruben/Orchestration/network-orchestration
  tasks:
    - name: Supprimer le conteneur existant 
      command: docker rm -f vnf-lb
      ignore_errors: yes
    - name: Lancer le conteneur Load Balancer
      shell: |
        docker run -d --name vnf-lb --network net-chain -p 9090:80 \
        -v {{ project_dir }}/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg:ro \
        haproxytech/haproxy-alpine
